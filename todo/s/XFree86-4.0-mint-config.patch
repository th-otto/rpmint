--- XFree86-4.0/xc/config/cf/Imakefile.orig	Fri Jan 21 19:27:34 2000
+++ XFree86-4.0/xc/config/cf/Imakefile	Tue Dec 19 13:25:22 2000
@@ -78,6 +78,7 @@
 Amoeba.cf \
 DGUX.cf \
 FreeBSD.cf \
+FreeMiNT.cf \
 Mips.cf \
 NetBSD.cf \
 OpenBSD.cf \
diff -urN XFree86-4.0-orig/xc/config/cf/Imake.cf XFree86-4.0/xc/config/cf/Imake.cf
--- XFree86-4.0-orig/xc/config/cf/Imake.cf	Sun Feb 13 08:47:36 2000
+++ XFree86-4.0/xc/config/cf/Imake.cf	Thu Jun 22 16:06:42 2000
@@ -748,6 +748,16 @@
 #endif
 #endif /* QNX/Neutrino */
 
+#ifdef __MINT__   /* >>>>> EEKS >>>>> */
+# ifdef FreeMiNT
+#  undef FreeMiNT
+# endif
+# define MacroIncludeFile <FreeMiNT.cf>
+# define MacroFile FreeMiNT.cf
+# define mc68000Architecture
+# define MintArchitecture
+#endif   /* <<<<< EEKS <<<<< */
+
 #ifndef MacroIncludeFile
 XCOMM WARNING:  Imake.cf not configured; guessing at definitions!!!
 XCOMM This might mean that BOOTSTRAPCFLAGS was not set when building imake.
diff -urN XFree86-4.0-orig/xc/config/imake/imake.c XFree86-4.0/xc/config/imake/imake.c
--- XFree86-4.0-orig/xc/config/imake/imake.c	Wed Dec 29 01:54:48 1999
+++ XFree86-4.0/xc/config/imake/imake.c	Tue May 30 00:34:32 2000
@@ -417,7 +417,8 @@
 	sprintf(makefileMacro, "MAKEFILE=%s", Imakefile);
 	AddMakeArg( makefileMacro );
 
-	if ((tmpfd = fopen(tmpMakefile, "w+")) == NULL)
+/*	if ((tmpfd = fopen(tmpMakefile, "w+")) == NULL)*/
+	if ((tmpfd = fopen(tmpMakefile, "w")) == NULL)
 		LogFatal("Cannot create temporary file %s.", tmpMakefile);
 
 	cleanedImakefile = CleanCppInput(Imakefile);
@@ -1491,15 +1492,19 @@
 		/*
 		 * Slurp it all up.
 		 */
-		fseek(tmpfd, 0, 0);
-		if (fstat(fileno(tmpfd), &st) < 0)
+/*		fseek(tmpfd, 0, 0);*/
+FILE * rd_fd = fopen (tmpfname, "r");
+		if (fstat(fileno(rd_fd), &st) < 0)
 			LogFatal("cannot stat %s for size", tmpMakefile);
 		pline = buf = Emalloc((int)st.st_size+1);
-		total_red = fread(buf, 1, st.st_size, tmpfd);
+		total_red = fread(buf, 1, st.st_size, rd_fd);
 		if (total_red == 0  &&  st.st_size != 0)
 			LogFatal("cannot read %s", tmpMakefile);
 		end = buf + total_red;
 		*end = '\0';
+fclose (rd_fd);
+freopen(tmpfname, "w", tmpfd);
+#ifdef ___NIX
 		fseek(tmpfd, 0, 0);
 #if defined(SYSV) || defined(WIN32) || defined(USE_FREOPEN)
 		tmpfd = freopen(tmpfname, "w+", tmpfd);
@@ -1512,6 +1517,8 @@
 #else	/* !SYSV */
 		ftruncate(fileno(tmpfd), (off_t) 0);
 #endif	/* !SYSV */
+#endif /*___NIX*/
+
 		initialized = TRUE;
 	    fprintf (tmpfd, "# Makefile generated by imake - do not edit!\n");
 	    fprintf (tmpfd, "# %s\n",
diff -urN XFree86-4.0-orig/xc/config/imake/imakemdep.h XFree86-4.0/xc/config/imake/imakemdep.h
--- XFree86-4.0-orig/xc/config/imake/imakemdep.h	Thu Dec 30 05:07:26 1999
+++ XFree86-4.0/xc/config/imake/imakemdep.h	Mon May 29 22:51:56 2000
@@ -192,6 +192,12 @@
 #define imake_ccflags "-D__QNXNTO__"
 #endif
 
+/* >>>>> EEKS >>>>> */
+#ifdef __MINT__
+# define imake_ccflags "-D_GNU_SOURCE"
+#endif
+/* <<<<< EEKS <<<<< */
+
 #else /* not CCIMAKE */
 #ifndef MAKEDEPEND
 /*
@@ -302,6 +308,11 @@
 #if defined (__QNX__)
 #define DEFAULT_CPP "/usr/X11R6/bin/cpp"
 #endif
+
+#ifdef __MINT__   /* >>>>> EEKS >>>>> */
+# define DEFAULT_CPP "/usr/bin/cpp"
+#endif   /* <<<<< EEKS <<<<< */
+
 /*
  * Step 5:  cpp_argv
  *     The following table contains the flags that should be passed
@@ -630,6 +641,21 @@
 #endif
 #endif
 
+#ifdef __MINT__   /* >>>>> EEKS >>>>> */
+	"-traditional",
+	"-D__MINT__",
+# ifdef mc68000
+	"-Dmc68000",
+	"-D__mc68000__",
+	"-D__M68000__",
+# endif
+# ifdef atarist
+	"-Datarist",
+	"-D__atarist",
+	"-D__atarist__",
+# endif
+#endif   /* <<<<< EEKS <<<<< */
+
 };
 
 
@@ -695,7 +721,8 @@
 # define DEFAULT_OS_MINOR_REV   "r %*d.%[0-9]"
 # define DEFAULT_OS_TEENY_REV   "v %[0-9]" 
 /* # define DEFAULT_OS_NAME        "srm %[^\n]" */ /* Not useful on ISC */
-#elif defined(__FreeBSD__) || defined(__OpenBSD__)
+
+#elif defined(__FreeBSD__) || defined(__OpenBSD__) || defined(__MINT__) /* >>>>> EEKS <<<<< */
 /* BSD/OS too? */
 /* uname -r returns "x.y[.z]-mumble", e.g. "2.1.5-RELEASE" or "2.2-0801SNAP" */
 # define DEFAULT_OS_MAJOR_REV   "r %[0-9]"
@@ -1026,6 +1053,28 @@
 # ifdef PowerMAX_OS
 	{"PowerMAX_OS", "1"},
 # endif
+
+/* >>>>> EEKS >>>>> */
+#ifdef __MINT__
+	{"__MINT__", "1"},
+#endif
+#ifdef __mc68000__
+	{"__mc68000__", "1"},
+#endif
+#ifdef __M68000__
+	{"__M68000__", "1"},
+# endif
+#ifdef atarist
+	{"atarist", "1"},
+#endif
+#ifdef __atarist
+	{"__atarist", "1"},
+#endif
+#ifdef __atarist__
+	{"__atarist__", "1"},
+#endif
+/* <<<<< EEKS <<<<< */
+
 	/* add any additional symbols before this line */
 	{NULL, NULL}
 };
